# 快速开始指南

## 第一步：安装依赖

### 1. 安装 Go
确保已安装 Go 1.23 或更高版本：
```bash
go version
```

### 2. 安装 Wails CLI
```bash
go install github.com/wailsapp/wails/v2/cmd/wails@latest
```

确保 `$GOPATH/bin` 或 `$HOME/go/bin` 在 PATH 中。

### 3. 下载项目依赖
```bash
cd /path/to/lottery
go mod download
```

## 第二步：运行项目

### 开发模式（推荐用于测试）
```bash
wails dev
```

这将启动开发服务器，你可以实时看到更改。

### 编译为可执行文件

#### Mac
```bash
wails build -platform darwin
```

#### Windows
```bash
wails build -platform windows
```

#### Linux（包括国产系统如统信UOS、麒麟等）
```bash
wails build -platform linux
```

编译后的文件在 `build/bin/` 目录下。

## 第三步：使用程序

### 界面说明

程序采用 Tab 界面设计，包含两个主要标签页：

1. **用户与奖项管理**：管理用户和奖项
2. **抽奖**：进行抽奖操作

### 快速操作流程

#### 1. 添加用户

**方式一：单个添加**
- 切换到"用户与奖项管理"标签页
- 点击"添加用户"按钮
- 输入姓名（可选，如果留空则使用照片文件名）
- 选择照片（可选）
- 点击"添加"

**方式二：CSV 导入**
- 点击"导入"按钮
- 选择 CSV 文件（格式：`姓名,照片路径` 或 `姓名`）
- 点击"导入"

**方式三：文件夹批量导入**
- 点击"文件夹导入"按钮
- 选择包含图片的文件夹
- 程序会自动使用文件名作为姓名，图片作为照片

#### 2. 设置奖项

- 在"用户与奖项管理"标签页的"奖项管理"面板
- 点击"添加奖项"按钮
- 填写奖项信息（名称、描述、数量、等级）
- 点击"添加"

#### 3. 开始抽奖

- 切换到"抽奖"标签页
- 选择要抽取的奖项
- （可选）设置抽奖时长（默认 4 秒）
- （可选）点击"设置背景"设置自定义背景图
- 点击"开始抽奖"
- 等待动画结束，查看结果

#### 4. 全屏模式

- 点击"全屏"按钮进入全屏模式
- 适合大屏幕展示，所有功能在全屏模式下都可用
- 点击"退出全屏"返回

#### 5. 查看中奖列表

- 点击"中奖列表"按钮
- 查看所有中奖用户及其奖项

#### 6. 重置抽奖

- 点击"重置抽奖"按钮
- 确认后清空所有中奖记录

## 常见问题

### Q: 编译时提示找不到 wails 命令？
A: 确保已正确安装 Wails CLI，并且 `$GOPATH/bin` 或 `$HOME/go/bin` 在 PATH 中。

### Q: 如何重置所有数据？
A: 删除用户主目录下的 `.lottery` 文件夹：
- Mac/Linux: `rm -rf ~/.lottery`
- Windows: 删除 `C:\Users\<用户名>\.lottery` 文件夹

### Q: 照片太大无法上传？
A: 建议使用小于 1MB 的图片文件。可以使用图片压缩工具先压缩。

### Q: 如何备份数据？
A: 复制 `~/.lottery/lottery.db` 文件即可（SQLite 数据库文件）。

### Q: CSV 文件格式是什么？
A: CSV 文件格式为：
```
姓名1,照片路径1
姓名2,照片路径2
姓名3
```
如果只有姓名没有照片路径，则只添加姓名。

### Q: 文件夹导入支持哪些图片格式？
A: 支持常见的图片格式：JPG、PNG、GIF、BMP、WebP 等。

### Q: 如何设置自定义背景？
A: 在抽奖页面点击"设置背景"按钮，选择图片文件（支持静态图和动态 GIF），点击"应用背景"即可。

### Q: 抽奖时长可以调整吗？
A: 可以，在抽奖页面可以设置抽奖时长（2-30 秒），设置后会自动保存。

### Q: 全屏模式下如何调整抽奖时长？
A: 在全屏模式下，可以使用上下键调整时长输入框的数值，或者直接输入。

## 数据存储位置

程序数据存储在：
- **Mac/Linux**: `~/.lottery/lottery.db`
- **Windows**: `C:\Users\<用户名>\.lottery\lottery.db`

数据以 SQLite 数据库格式存储，可以使用 SQLite 工具查看。

## 技术支持

如有问题，请查看 README.md 或提交 Issue。
